<!doctype html>
<html lang="en" class="overflow-hidden">

    <head>
        <!-- Required meta tags -->
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1.0, user-scalable=no">
        <meta name="color-scheme" content="light">

        <!-- Common CSS -->
        <link rel="stylesheet" type="text/css" href="css/fonts.css">

        <link rel="stylesheet" type="text/css" href="css/home.css">
        <script type="text/javascript">
            const systemName = "<%=systemName%>";
            const version = '<%=version%>';
            const isSSL = <%=isSSL%>;
        </script>
        <script type="module" src="js/config.js"></script>
        <title><%=systemName%></title>
    </head>

    <body>
        <div id="disconnected" class="">Waiting for Connection<img src="../media/loading.svg"></div>
        <header>
            <div>These Dam Lochs!</div>
            <img src="img/logo.svg">
        </header>
            <main id="timers" style="display: flex;flex-direction: column;">
                <div style="background:white; padding: 1rem;">
                    <input id="shellyIP" type="text" value="10.201.0.33">
                    <button id="setShellyIP">Set IP</button>
                </div>
                <div>
                    <h3>Paste me in reciever!</h3>
                    <pre style="background:rgb(255, 255, 255);padding: 1rem;border-radius: 5px;text-transform: none;">const MYID = 1;

Shelly.addEventHandler(
	function (event) {
		if (
			typeof event !== 'object' ||
			event.name !== 'lora' ||
			!event.info ||
			!event.info.data
		) {
			return;
		}
		const message = atob(event.info.data);
		const object = JSON.parse(message)
		console.log(message)
		switch (object.command) {
			case 'lock':
				if (object.target == MYID) {
					Shelly.call("Switch.set", { 'id': 0, 'on': !object.lock });
				}
				break;
			case 'state':
				if (object.target == MYID) {
					console.log(Shelly.call("Switch.GetStatus", { 'id': 0 }));
				}
				break;
		}
	}
);</pre>
            </div>
        </main>
    </body>

</html>